<ion-header>
  <ion-toolbar>

    <ion-title>{{'NOTIFICATION.TITLE' | translate}}</ion-title>

  </ion-toolbar>


  <ion-segment color="danger" *ngIf= "selectedTap == 'general'" [(ngModel)]="selectedTap">
      <ion-segment-button value="general" (click)= "showNotification('general')" style="    color: white;background-color: #f53d3d;">
        General
      </ion-segment-button>
      <ion-segment-button value="in" (click)= "showNotification('in')" >
        Visitor
      </ion-segment-button>
    </ion-segment>
    <ion-segment color="danger" *ngIf= "selectedTap == 'in'" [(ngModel)]="selectedTap">
        <ion-segment-button value="general" (click)= "showNotification('general')" >
          General
        </ion-segment-button>
        <ion-segment-button value="in" (click)= "showNotification('in')" style="color: white;background-color: #f53d3d;">
          Visitor
        </ion-segment-button>
      </ion-segment>
  <!-- <ion-toolbar >

    <ion-searchbar [(ngModel)]="queryText" (ionInput)="filterTechnologies($event.target.value)" placeholder="Search">

    </ion-searchbar>
  </ion-toolbar> -->
</ion-header>

<ion-content>

    <ion-searchbar *ngIf= "(selectedTap == 'general' && (queryText || (VM.searchGeneralNotificationList && VM.searchGeneralNotificationList.length > 0)))" [(ngModel)]="queryText" (ionInput)="filterTechnologies()" placeholder="Search">
        <!-- (ionChange)="updateSchedule()" -->
    </ion-searchbar>


    <ion-searchbar *ngIf= "(selectedTap == 'in'  && (queryText || ( VM.searchInNotificationList && VM.searchInNotificationList.length > 0)))" [(ngModel)]="queryText" (ionInput)="filterTechnologies()" placeholder="Search">
      <!-- (ionChange)="updateSchedule()" -->
    </ion-searchbar>

    <!-- <div style="margin: 0 auto;display: block;height: 100%;"> -->
      <!-- <h5 style="height: 100%; width: 100%; display: flex; justify-content: center; align-items: center;" *ngIf="true">{{'NOTIFICATION.NO_NOTIFICATION' | translate}}</h5> -->
      <!-- <ion-list *ngIf="false">
        <ion-item>
        </ion-item>
      </ion-list> -->
      <ion-refresher (ionRefresh)="doRefresh($event)">
        <ion-refresher-content></ion-refresher-content>
    </ion-refresher>

      <!-- <ion-card no-margin style="width:100%;margin-top:14px !important; ">  -->
        <ion-list *ngIf= "(selectedTap == 'general')">
          <ion-card [ngClass]="{'readCard': (notification.IsRead == true || notification.IsRead == 'true'), 'unReadCard':(notification.IsRead == false || notification.IsRead == 'false')}" *ngFor="let notification of VM.searchGeneralNotificationList">
            <ion-item-sliding #slideDOM class="mySlidingItem"  (ionDrag)="ondrag($event, slideDOM, notification)">

              <!-- <ion-item-divider style="padding:0px"> -->
              <ion-item [ngClass]="{'myItemRead': (notification.IsRead === true || notification.IsRead === 'true'), 'myItem':(notification.IsRead === false || notification.IsRead === 'false')}" (click)= "viewNotification(notification)">
                  <!-- <ion-item-divider> -->
                  <!-- <ion-avatar item-start> -->
                      <img item-start class="animated fadeInDown delay-1s" onError="this.src='../../assets/images/user.png';" [src]="(notification.IsRead == true || notification.IsRead == 'true') ? '../../assets/images/read.png' : '../../assets/images/unread.png'">
                  <!-- </ion-avatar> -->
                  <div item-text-wrap [innerHTML]="notification.HtmlContent.trim()" text-wrap class="myText"></div>
                  <div item-right style="margin: 0px;">
                    <p style="
                    font-size: 14px;"><b>{{notification.CreatedOn | date : 'dd'}} {{notification.CreatedOn | date : 'MMM'}}</b></p>
                    <p style="
                    font-size: 12px;    margin: 0 auto;">{{notification.CreatedOn| date : 'hh:mm a'}}</p>
                  </div>

              </ion-item>
              <ion-item-options no-border no-lines side="right">
                <!-- <button ion-button icon-only color="danger" outline no-border (click)="deleteNotification(slideDOM, notification)">
                  <ion-icon color="danger" class="siva-icon-trash-empty"></ion-icon>
                </button> -->
              </ion-item-options>
          </ion-item-sliding>
        </ion-card>
       </ion-list>

        <ion-list *ngIf= "(selectedTap == 'in')">
          <ion-card [ngClass]="{'readCard': (notification.IsRead == true || notification.IsRead == 'true'), 'unReadCard':(notification.IsRead == false || notification.IsRead == 'false')}" *ngFor="let notification of VM.searchInNotificationList">
          <ion-item-sliding #slideDOM class="mySlidingItem" (ionDrag)="ondrag($event, slideDOM, notification)">

            <ion-item [ngClass]="{'myItemRead': (notification.IsRead === true || notification.IsRead === 'true'), 'myItem':(notification.IsRead === false || notification.IsRead === 'false')}" (click)= "viewNotification(notification)">
                <!-- <ion-item-divider> -->
                <img item-start class="animated fadeInDown delay-1s" onError="this.src='../../assets/images/user.png';" [src]="(notification.IsRead == true || notification.IsRead == 'true') ? '../../assets/images/read.png' : '../../assets/images/unread.png'">
                <div item-text-wrap [innerHTML]="notification.HtmlContent.trim()" text-wrap class="myText"></div>
                <div item-right style="margin: 0px;">
                  <p style="
                  font-size: 14px;"><b>{{notification.CreatedOn | date : 'dd'}} {{notification.CreatedOn | date : 'MMM'}}</b></p>
                  <p style="
                  font-size: 12px;    margin: 0 auto;">{{notification.CreatedOn| date : 'hh:mm a'}}</p>
                </div>

            </ion-item>
            <ion-item-options side="right">
                <!-- <button ion-button icon-only color="danger" outline no-border (click)="deleteNotification(slideDOM, notification)">
                  <ion-icon color="danger" class="siva-icon-trash-empty"></ion-icon>
                </button> -->
              </ion-item-options>
          </ion-item-sliding>
        </ion-card>
        </ion-list>
        <ion-row style="height: 100%; width: 100%; display: flex; justify-content: center; align-items: center;" *ngIf="loadingFinished && (selectedTap == 'general' && VM.searchGeneralNotificationList.length == 0) || (selectedTap == 'in' && VM.searchInNotificationList.length == 0)">
          <ion-col col-12 col-sm-12 col-md-12>
                  <img app-logo-img class="animated fadeInDown delay-1s" style="
                  display: block;
                  margin: 0 auto;
                  margin-top: 10px;
                  margin-bottom: 10px;
              " src="assets/images/notification_empty.png">
                  <h5 style="display: flex;justify-content: center;margin-bottom: 30px;margin-top: 50px;">{{'NOTIFICATION.NO_NOTIFICATION' | translate}}</h5>
          </ion-col>
    </ion-row>
    <ion-infinite-scroll threshold="100px" (ionInfinite)="loadData($event)">
      <ion-infinite-scroll-content
        loadingSpinner="bubbles"
        loadingText="{{ 'COMMON.LOADER_MSG.LOADING_MORE_DATA' | translate }}">
      </ion-infinite-scroll-content>
    </ion-infinite-scroll>
</ion-content>


